!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}({16:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function l(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,l)}c((o=o.apply(e,t||[])).next())})};let o;figma.showUI(__html__,{width:166,height:150});let r=[],i=[],a=[];figma.ui.onmessage=e=>{if("exportSelection"===e.type){if(o=!1,r=[],i=[],a=[],figma.currentPage.selection.length<1)return;try{let e=function e(t){if(t.length<1)return[];let n=[];t[0]&&("FRAME"===t[0].type&&"PAGE"===t[0].parent.type||"COMPONENT"===t[0].type&&"PAGE"===t[0].parent.type)&&(console.log("GOT A FRAME"),o=!0,r.push(a(t[0],!1)),t=t[0].children);if(t.length<1)return[];t.forEach(e=>{if(!o){if("PAGE"===e.parent.type)return;let t=function e(t){console.log("node:",t);console.log("node.type:",t.type);return"FRAME"!==t.type&&("COMPONENT"!==t.type||"PAGE"!==t.parent.type)||"FRAME"===t.type&&"NONE"!==t.layoutMode||"FRAME"===t.type&&"FRAME"===t.parent.type?e(t.parent):(o=!0,t)}(e),n=a(t,!0);n.children=[],r.push(n)}let t=a(e,!1);n.push(t)});return n;function a(t,n){let o={children:[],type:null};for(const r in t){let i=t[r];if("children"!==r||n||(i=e(i)),"backgrounds"===r&&(i=e(i)),"fills"===r&&i.length>0&&l(i,t.id),i==figma.mixed&&"cornerRadius"===r&&(i=Math.min(t.topLeftRadius,t.topRightRadius,t.bottomLeftRadius,t.bottomRightRadius)),i==figma.mixed){let e="getRange"+r.replace(/^\w/,e=>e.toUpperCase());try{i=t[e](0,1)}catch(e){continue}}o[r]=i}return"FRAME"===t.type&&"NONE"!==t.layoutMode&&(o.type="AUTOLAYOUT"),o}function l(e,t){for(const n in e){const o=e[n];"IMAGE"==o.type&&i.push({hash:o.imageHash,id:t})}}}(figma.currentPage.selection);r[0].children.length<1&&(r[0].children=e),console.log("frameArr: ",r)}catch(e){console.log(e),console.log("selected layers need to be inside of a frame"),figma.ui.postMessage({type:"footerMsg",action:"selected layers need to be inside of a frame",layerCount:null})}i.length>0?function(e,t){n(this,void 0,void 0,function*(){for(const t in e){const n=e[t].hash,o=e[t].id.replace(/:/g,"-");let r=figma.getImageByHash(n),i=yield r.getBytesAsync();a.push({name:o,bytes:i}),console.log(i)}figma.ui.postMessage({type:"fetchImagesAndAEUX",images:a,data:t})})}(Array.from(new Set(i)),r):figma.ui.postMessage({type:"fetchAEUX",data:r})}if("flattenLayers"===e.type){if(figma.currentPage.selection.length<1)return;let e=function e(t,n){try{return t.forEach(t=>{if("BOOLEAN_OPERATION"==t.type&&(figma.flatten([t]),n++),t.children)n=e(t.children,n);else{let e=t.relativeTransform;1==e[0][0].toFixed(6)&&0==e[0][1].toFixed(6)&&0==e[1][0].toFixed(6)&&1==e[1][1].toFixed(6)||(figma.flatten([t]),n++)}}),n}catch(e){return console.log(e),n}}(figma.currentPage.selection,0)||0;figma.currentPage.selection=figma.currentPage.selection,figma.ui.postMessage({type:"footerMsg",action:"flattened",layerCount:e})}if("detachComponents"===e.type){console.log("detachComponents");let e=4;figma.ui.postMessage({type:"footerMsg",action:"flattened",layerCount:e})}}}});